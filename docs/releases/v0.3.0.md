# FlowGate v0.3.0 Release Notes

**Release Date**: 2026-02-19
**Codename**: "Documentation & Quality"
**Status**: Production Ready

---

## Overview

FlowGate v0.3.0 is a major quality and documentation release that significantly improves test coverage, reorganizes documentation for better discoverability, and enhances dependency management for broader compatibility.

### Highlights

- üß™ **+75.9% Test Coverage**: 394 tests (up from 224), including comprehensive error path and integration tests
- üìö **Unified Documentation**: Reorganized into clear user/developer/operations sections with visual architecture
- üêç **Python 3.11+ Support**: Broader compatibility (previously required 3.12+)
- üîß **Better Dependency Management**: Flexible LiteLLM versions, automated health checks
- ‚ö†Ô∏è **Breaking Change**: Config version 1 support removed (migrate before upgrading)

---

## What's New

### üß™ Phase 3: Comprehensive Test Enhancement

#### Error Path Testing (102 new tests)
Testing is not just about happy paths. This release adds comprehensive error handling tests:

- **Config Errors** (34 tests): Missing keys, invalid types, malformed values
- **Process Errors** (20 tests): Service failures, port conflicts, PID issues
- **Auth Errors** (29 tests): OAuth failures, missing credentials, timeouts
- **Profile Errors** (19 tests): Invalid profiles, merge failures, credential issues

**Impact**: Every error condition now has explicit test coverage, ensuring graceful degradation.

#### Test Data Factory
No more copy-pasted test configurations! The new `ConfigFactory` provides:

```python
# Before: 77 lines of hardcoded config
config = {...}  # Long nested dictionary

# After: 1 line with clear intent
config = ConfigFactory.with_auth(["codex", "copilot"])
```

**Impact**: Eliminated 311 lines of duplicate test config, tests are now easier to write and maintain.

#### Integration Test Suite (43 tests)
New integration tests cover real-world scenarios:

- **Service Lifecycle** (22 tests): Start, stop, restart, health checks
- **OAuth Flows** (17 tests): Browser OAuth, polling, credential storage (with mock server)
- **Concurrent Operations** (7 tests): Profile switches during service operations

**Test Isolation**: Uses mock services and temporary directories‚Äîno real binaries needed.

**Run Integration Tests**:
```bash
# Run only integration tests
pytest -m integration

# Run all tests
pytest -m ""
```

---

### üìö Phase 4.1: Documentation Unification

#### New Documentation Structure

Documentation has been reorganized from 3 scattered locations into a clear hierarchy:

```
docs/
‚îú‚îÄ‚îÄ user-guide/          # For end users
‚îÇ   ‚îú‚îÄ‚îÄ installation.md
‚îÇ   ‚îú‚îÄ‚îÄ configuration.md  # ‚≠ê 490-line comprehensive guide
‚îÇ   ‚îú‚îÄ‚îÄ profiles.md
‚îÇ   ‚îú‚îÄ‚îÄ authentication.md
‚îÇ   ‚îú‚îÄ‚îÄ cli-reference.md
‚îÇ   ‚îî‚îÄ‚îÄ troubleshooting.md
‚îú‚îÄ‚îÄ developer-guide/     # For contributors
‚îÇ   ‚îú‚îÄ‚îÄ getting-started.md
‚îÇ   ‚îú‚îÄ‚îÄ testing.md
‚îÇ   ‚îú‚îÄ‚îÄ contributing.md
‚îÇ   ‚îî‚îÄ‚îÄ release-process.md
‚îú‚îÄ‚îÄ architecture/        # System design
‚îÇ   ‚îú‚îÄ‚îÄ diagrams.md      # ‚≠ê Visual architecture
‚îÇ   ‚îî‚îÄ‚îÄ data-flows.md    # ‚≠ê Detailed flows
‚îú‚îÄ‚îÄ operations/          # For production
‚îÇ   ‚îú‚îÄ‚îÄ deployment.md
‚îÇ   ‚îî‚îÄ‚îÄ monitoring.md
‚îî‚îÄ‚îÄ api/                 # API reference
    ‚îî‚îÄ‚îÄ python-api.md    # ‚≠ê Auto-generated docs
```

**7 README Index Files**: Each section has a clear entry point guiding you to relevant docs.

#### Consolidated Configuration Guide

Two separate config docs have been merged into one comprehensive 490-line guide:

- **Complete Schema Reference**: All config sections documented
- **Version Migration**: V1‚ÜíV2 migration guide integrated
- **Path Resolution**: Rules and examples
- **Best Practices**: Security, validation, profiles
- **Troubleshooting**: Common issues and solutions
- **FAQ**: Migration questions answered

**Find it**: `docs/user-guide/configuration.md`

#### Simplified Root README

README.md reduced from 349 to 181 lines (-48%):
- Focus on project overview and quick start
- Links to detailed documentation
- Status badges for professional appearance
- Clear navigation for different audiences

---

### üèóÔ∏è Phase 4.3: Architecture Documentation

#### Visual Architecture (4 Diagrams)

New Mermaid diagrams visualize the system:

**1. Component Diagram**: Shows 8 core components, relationships, and external services

**2. Profile Switch Flow**: 11-step sequence showing config overlay, credential resolution, service restart

**3. OAuth Login Flow**: Complete browser OAuth with polling mechanism

**4. Service Lifecycle**: State diagram with 6 states (Stopped ‚Üí Starting ‚Üí Running ‚Üí ...)

**View Them**: `docs/architecture/diagrams.md`

#### Detailed Data Flows (5 Flows)

811 lines of detailed documentation covering:
1. Configuration Loading (YAML‚Üívalidation‚Üípath resolution)
2. Profile Switching (overlay merging‚Üícredential resolution‚Üíactive config)
3. Service Startup (process spawning‚ÜíPID tracking‚Üíhealth checks)
4. OAuth Authentication (browser OAuth‚Üípolling‚Üícredential storage)
5. Credential Resolution (API key references‚Üísecure file/env handling)

Each flow includes:
- Step-by-step walkthrough
- Involved modules and functions
- Data transformation examples
- Error handling details
- Usage examples

**Find Them**: `docs/architecture/data-flows.md`

#### Auto-Generated API Documentation

Using `pdoc`, we now have:
- **19 HTML pages** of API documentation
- Always up-to-date with code
- Covers all modules: config, profile, process, oauth, CLI commands

**Generate Locally**:
```bash
./scripts/generate_docs.sh
open docs/api/_generated/flowgate/index.html
```

**Find Landing Page**: `docs/api/python-api.md`

---

### üîß Phase 4.2: Dependency Optimization

#### Relaxed LiteLLM Constraint

**Before**: `litellm[proxy]==1.75.8` (exact pin)
**After**: `litellm[proxy]>=1.75.8,<2.0.0` (semver range)

**Why**: Allows automatic security patches and bug fixes within 1.x, while preventing breaking changes from 2.x.

#### Extended Python Support

**Before**: `>=3.12,<3.14` (Python 3.12-3.13 only)
**After**: `>=3.11` (Python 3.11+ supported)

**Why**: Python 3.11 is still widely used. This makes FlowGate accessible to more users.

#### Dependency Audit Script

New `scripts/check_dependencies.sh` provides one-command health checks:

```bash
$ ./scripts/check_dependencies.sh
=== Dependency Audit ===

1. Outdated dependencies:
litellm 1.75.8 ‚Üí 1.82.3 available
...

2. Security vulnerabilities:
Note: pip audit not available in uv...

3. Current versions:
litellm      1.75.8
requests     2.31.0
pyyaml       6.0.1
```

**Use Cases**:
- Before releases: check for security updates
- Regular maintenance: monitor dependency health
- CI integration: automated dependency checks

---

## ‚ö†Ô∏è Breaking Changes

### Config Version 1 Removed

Config version 1 was deprecated in v0.2.0 and is now completely removed.

**If You Haven't Migrated**:
1. Stay on v0.2.0
2. Run `flowgate config migrate`
3. Verify with `flowgate doctor`
4. Then upgrade to v0.3.0

**If You're Already on V2**: No action needed, upgrade directly.

**Error You'll See** (if not migrated):
```
‚ùå Config Error: config_version 1 is no longer supported.
Please migrate to version 2. See docs/user-guide/configuration.md
```

---

## Installation & Upgrade

### New Installation

```bash
git clone https://github.com/heliar-k/flowgate.git
cd flowgate
export UV_CACHE_DIR=.uv-cache
uv sync --group runtime --group test
```

### Upgrade from v0.2.0

**If Already on Config V2**:
```bash
git pull
uv sync --group runtime --group test
uv run flowgate --config config/flowgate.yaml doctor
```

**If Still on Config V1** (check with `grep config_version config/flowgate.yaml`):
```bash
# FIRST, migrate config (on v0.2.0)
uv run flowgate --config config/flowgate.yaml config migrate

# Verify migration
uv run flowgate --config config/flowgate.yaml status

# THEN upgrade
git pull
uv sync --group runtime --group test
```

### Python 3.11 Users (New!)

```bash
# Verify Python version
python --version  # Should show 3.11+

# Install
uv sync --group runtime --group test
```

---

## Test Results

### Full Test Suite

```bash
$ pytest tests/ -v
======================== test session starts =========================
collected 394 items

tests/test_auth_errors.py::TestAuthErrors::test_... PASSED  [ 1%]
...
tests/test_validators.py::TestValidators::test_... PASSED  [100%]

================= 394 passed in 3.52s ================
```

**Test Breakdown**:
- **Unit Tests**: 351 (marked `@pytest.mark.unit`)
- **Integration Tests**: 43 (marked `@pytest.mark.integration`)
- **Pass Rate**: 100% (394/394)

### Run Tests Yourself

```bash
# All tests
pytest tests/ -v

# Unit only (fast, default for CI)
pytest tests/ -v -m unit

# Integration only
pytest tests/ -v -m integration

# With coverage
pytest --cov=src/flowgate --cov-report=term-missing
```

---

## Metrics & Statistics

### Test Coverage

| Metric | v0.2.0 | v0.3.0 | Change |
|--------|--------|--------|--------|
| Total Tests | 224 | 394 | **+170 (+75.9%)** |
| Unit Tests | 221 | 351 | +130 |
| Integration Tests | 3 | 43 | +40 |
| Error Path Tests | ~20 | 122 | +102 |
| Test Pass Rate | 100% | 100% | Maintained |

### Documentation

| Metric | v0.2.0 | v0.3.0 | Change |
|--------|--------|--------|--------|
| Total Doc Files | 38 | 60+ | +58% |
| Documentation Lines | ~5,000 | ~8,500 | +70% |
| README Lines | 349 | 181 | **-48%** (simplified) |
| Architecture Diagrams | 0 | 4 | New |
| API Doc Pages | 0 | 19 | New |

### Code Quality

- **Eliminated**: 311 lines of duplicate test config
- **Simplified**: Root README by 48%
- **Standardized**: Dependency constraints with semver
- **Documented**: Every major component and data flow

---

## Migration Guide

### From v0.1.0 to v0.3.0

**Two-Step Migration Required**:

1. **Upgrade to v0.2.0 first**:
   ```bash
   git checkout v0.2.0
   uv sync --group runtime --group test
   uv run flowgate --config config/flowgate.yaml config migrate
   ```

2. **Then upgrade to v0.3.0**:
   ```bash
   git checkout v0.3.0
   uv sync --group runtime --group test
   uv run flowgate --config config/flowgate.yaml doctor
   ```

### From v0.2.0 to v0.3.0

**Check Config Version**:
```bash
grep config_version config/flowgate.yaml
```

**If Version 2**: Direct upgrade (see [Upgrade from v0.2.0](#upgrade-from-v020))

**If Version 1 or Missing**: Migrate first, then upgrade

---

## What's Next

### Phase 5 (Optional): Performance & Observability

Future enhancements may include:
- Performance metric logging (`observability.py`)
- Enhanced health checks (resource monitoring)
- Metric export (Prometheus/Grafana)

These are optional improvements (P3 priority) and won't delay future releases.

### Feedback Welcome

Found a bug? Have a suggestion? Want to contribute?

- **Issues**: https://github.com/heliar-k/flowgate/issues
- **Documentation**: https://github.com/heliar-k/flowgate/tree/main/docs
- **Contributing**: See `docs/developer-guide/contributing.md`

---

## Credits

**Developed by**: FlowGate Team
**AI Assistant**: Claude Opus 4.6
**Release Manager**: [@heliar-k](https://github.com/heliar-k)

**Special Thanks**:
- All contributors who reported issues
- Early adopters who provided feedback
- The LiteLLM and CLIProxyAPIPlus communities

---

## Related Documentation

- **[CHANGELOG.md](../../CHANGELOG.md)** - Detailed changelog
- **[User Guide](../user-guide/README.md)** - End-user documentation
- **[Configuration Guide](../user-guide/configuration.md)** - Config reference
- **[Architecture](../architecture/README.md)** - System architecture
- **[Developer Guide](../developer-guide/README.md)** - Contributing guide
- **[Migration Guide v0.2.0](v0.2.0.md)** - Previous release

---

## Download & Links

- **GitHub Release**: https://github.com/heliar-k/flowgate/releases/tag/v0.3.0
- **Source Code**: https://github.com/heliar-k/flowgate/archive/refs/tags/v0.3.0.zip
- **Tarball**: https://github.com/heliar-k/flowgate/archive/refs/tags/v0.3.0.tar.gz

---

**Version**: v0.3.0
**Released**: 2026-02-19
**License**: MIT
